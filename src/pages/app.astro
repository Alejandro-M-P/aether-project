---
import Layout from '../layouts/Layout.astro';
// AHORA ESTO FUNCIONA: "UniverseCanvas" existe como exportación nombrada.
import { UniverseCanvas } from '../components/react/Islands.jsx'; 
import ControlBar from '../components/react/ControlBar.jsx';
import UserWidget from '../components/react/UserWidget.jsx';
---

<Layout title="AETHER | Sistema">

    {/* Fondo del Sistema */}
    <div class="fixed inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-zinc-900/50 via-black to-black -z-20">
        
        {/* Ruido estático */}
        <div class="absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"></div>
        
        {/* Contenedor del Mapa Circular: OCUPANDO TODA LA PANTALLA */}
        <div class="map-circle-wrapper absolute inset-0 z-0 w-full h-full overflow-hidden">
            {/* client:only="react" para evitar fallos de SSR con Three.js */}
            <UniverseCanvas client:only="react" />
        </div>
    </div>

    <main class="relative z-10 w-full h-screen pointer-events-none">
    </main>

    {/* Header con gradiente corregido */}
    <header class="fixed top-0 left-0 w-full z-40 px-8 py-6 flex justify-between items-start pointer-events-none select-none bg-gradient-to-b from-black/90 to-transparent">
        <div class="pointer-events-auto flex flex-col">
            <h1 class="text-3xl font-bold tracking-tighter text-white font-mono flex items-center gap-3">
                AETHER
                <span class="flex h-2 w-2 relative">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                </span>
            </h1>
            <p class="text-[10px] text-zinc-500 font-mono tracking-widest uppercase mt-1">Live Frequency Monitor</p>
        </div>

        <div class="pointer-events-auto">
            <UserWidget client:load />
        </div>
    </header>

    <ControlBar client:load />

</Layout>